<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"/>
	<title>Document</title>
	<style type="text/css">
		#box{
			width: 300px;
			height: 300px;
			margin: 0px auto;
			border: 2px solid gray;
		}
		#box img{
			width: 100%;
		}
		form{
			margin: 30px;
		}
	</style>
</head>
<body>
	<form action="http://localhost/project/artist-v2/api/index.php" method="post" enctype="multipart/form-data">
		<input type="hidden" name="m" value="user">
		<input type="hidden" name="a" value="changeHeadImage">
		<input type="hidden" name="userId" id="userId">
		<input type="file" name="newHeadImage" id="files"><br />
		<input type="submit" value="提交" style="margin-top:5px;">
	</form>
	<div id="box"></div>
</body>
</html>
<script type="text/javascript">
	var userId=document.getElementById("userId");
	userId.value=localStorage.userId;
	var box=document.getElementById("box");
	var files=document.getElementById("files");
	files.onchange=function(){
		var data = files.files[0];
		var fr = new FileReader();
		//console.log(fr);
		fr.readAsDataURL(data);	
		fr.onload=function(){
			//console.log(fr);
			var result = fr.result;
			var img = document.createElement("img");
			img.src=result;
			box.appendChild(img);
		}
	}	
</script>